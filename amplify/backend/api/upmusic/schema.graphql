# This "input" configures a global authorization rule to enable public access to
# all models in this schema. Learn more about authorization rules here: https://docs.amplify.aws/cli/graphql/authorization-rules
input AMPLIFY { globalAuthRule: AuthRule = { allow: public } } # FOR TESTING ONLY!

type User @model @auth(rules: [{allow: public}]) {
  id: ID!
  name: String
  about: String
  posts: [Post] @hasMany 
  key_pp: String
  key_back: String
  location: Location @hasOne 
  tag: Tag  @hasOne
  followings:[User] @hasMany
  followers: [User] @hasMany
  comments: [Comment] @hasMany
  likes: [Like] @hasMany
}
type Post @model @auth(rules: [{allow: public}]) {
  id: ID!
  type: String
  content: String 
  price: String
  key_media: String
  location: Location @hasOne 
  tag: Tag @hasOne
  participants: [User] @hasMany
  musician_needed: [User] @hasMany
  owner: User @belongsTo
  likes: [Like] @hasMany
  comments: [Comment] @hasMany
}
type Comment @model @auth(rules: [{allow: public}]) {
  id: ID!
  content: String
  post: Post @belongsTo
  owner: User @belongsTo
}
type Like @model @auth(rules: [{allow: public}]) {
  id: ID!
  post: Post @belongsTo
  owner: User @belongsTo
}
type Tag @model @auth(rules: [{allow: public}]) {
  id: ID!
  tag_styles: [String] 
  tag_roles: [String]
  tag_all: [String]
}
type Location @model @auth(rules: [{allow: public}]) {
  id: ID!
  content: String
  city: String
  country: String
  place: String
}
